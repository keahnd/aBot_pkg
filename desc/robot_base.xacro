<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro">

    <xacro:include filename='materials.xacro'></xacro:include>
    <xacro:include filename='moi_macros.xacro'></xacro:include>

    <link name='base_link'>
    </link>

    <joint name='chassis_joint' type='fixed'>
        <parent link='base_link'/>
        <child link='chassis'/>
        <origin xyz='-0.1 0 0'/>
    </joint>

    <link name='chassis'>
        <visual>
            <origin xyz='0.15 0 0.075'/>
            <geometry>
                <box size='0.3 0.3 0.15'/>
            </geometry>
            <material name='black'/>
        </visual>
        <collision>
            <origin xyz='0.15 0 0.075'/>
            <geometry>
                <box size='0.3 0.3 0.15'/>
            </geometry>
        </collision>
        <xacro:cuboid_moi mass='0.5' l='0.3' b='0.3' h='0.15'>
            <origin xyz='0.15 0 0.075' rpy='0 0 0'/>
        </xacro:cuboid_moi>
    </link>

    <joint name='left_wheel_joint' type='continuous'>
        <parent link='base_link'/>
        <child link='left_wheel'/>
        <origin xyz='0 0.17 0' rpy='-${pi/2} 0 0'/>
        <axis xyz='0 0 1'/>
    </joint>

    <link name='left_wheel'>
        <visual>
            <origin xyz='0 0 0'/>
            <geometry>
                <cylinder radius='0.05' length='0.04'/>
            </geometry>
            <material name='grey'/>
        </visual>
        <collision>
            <geometry>
                <cylinder radius='0.05' length='0.04'/>
            </geometry>
        </collision>
        <xacro:cylinder_moi mass='0.5' r='0.05' l='0.04'>
            <origin xyz='0 0 0' rpy='0 0 0'/>
        </xacro:cylinder_moi>
    </link>

    <joint name='right_wheel_joint' type='continuous'>
        <parent link='base_link'/>
        <child link='right_wheel'/>
        <origin xyz='0 -0.17 0' rpy='${pi/2} 0 0'/>
        <axis xyz='0 0 -1'/>
    </joint>

    <link name='right_wheel'>
        <visual>
            <origin xyz='0 0 0'/>
            <geometry>
                <cylinder radius='0.05' length='0.04'/>
            </geometry>
            <material name='grey'/>
        </visual>
        <collision>
            <geometry>
                <cylinder radius='0.05' length='0.04'/>
            </geometry>
        </collision>
        <xacro:cylinder_moi mass='0.5' r='0.05' l='0.04'>
            <origin xyz='0 0 0' rpy='0 0 0'/>
        </xacro:cylinder_moi>
    </link>

    <joint name='caster_wheel_joint' type='fixed'>
        <parent link='chassis'/>
        <child link='caster_wheel'/>
        <origin xyz='0.25 0 0'/>
    </joint>

    <link name='caster_wheel'>
        <visual>
            <origin xyz='0 0 0'/>
            <geometry>
                <sphere radius='0.05'/>
            </geometry>
            <material name='grey'/>
        </visual>
        <collision>
            <geometry>
                <sphere radius='0.05'/>
            </geometry>
        </collision>
        <xacro:sphere_moi mass='0.5' r='0.05'>
            <origin xyz='0 0 0' rpy='0 0 0'/>
        </xacro:sphere_moi>
    </link>

    <gazebo reference='caster_wheel'>
        <mu1 value='0.000001'/>
        <mu2 value='0.000001'/>
    </gazebo>

</robot>